test -e "$UNIGINE_HEAVEN_FOLDER/bin/heaven_x64" || return 1

unigine:heaven_run() {
    cd "$UNIGINE_HEAVEN_FOLDER" # Set this variable in test_options.sh

    LD_LIBRARY_PATH=bin:bin/x64:$LD_LIBRARY_PATH \
    MESA_EXTENSION_OVERRIDE="-GL_ARB_sample_shading -GL_ARB_blend_func_extended" \
    MESA_GL_VERSION_OVERRIDE="3.2" \
    run_bench 0 ./bin/heaven_x64 \
        -video_app opengl \
        -data_path ../ \
        -sound_app null \
        -engine_config ../data/heaven_4.0.cfg \
        -system_script heaven/unigine.cpp \
        -extern_define PHORONIX,RELEASE \
        -video_mode -1 \
        -video_fullscreen 1 | grep FPS: | xargs | cut -d ' ' -f 2
}

unigine:heaven:cpu_run() { INTEL_NO_HW=1 unigine:heaven_run; }

test_name="unigine:heaven unigine:heaven:cpu"
test_exec_time=300
